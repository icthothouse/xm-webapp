<mat-card class="card">
  <div class="card-header card-header-icon card-header-primary">
    <h4 class="card-title">{{'clientManagement.home.title'|translate}}</h4>
  </div>

  <div class="card-body">
    <div class="row align-items-center mt2 mb-2">
      <div class="col-xs-12 col-sm-3">
        <form (ngSubmit)="filterByClientId(clientId)" action="" novalidate>
          <div class="row flex-nowrap align-items-center">
            <div class="col pr-1">
              <mat-form-field class="example-form-field">
                <input
                  [(ngModel)]="clientId"
                  matInput
                  name="client-id"
                  placeholder="{{'clientManagement.search-by-client-id' | translate}}"
                  type="text">
                <button
                  (click)="clientId=''; filterByClientId(clientId)"
                  *ngIf="clientId"
                  mat-button
                  mat-icon-button
                  matSuffix
                  type="button">
                  <mat-icon>close</mat-icon>
                </button>
              </mat-form-field>
            </div>
            <div class="col-auto pl-0">
              <button class="btn btn-white rounded-circle btn-just-icon"
                      mat-button>
                <i class="material-icons">search</i>
              </button>
            </div>
          </div>
        </form>
      </div>
      <div class="col"></div>
    </div>

    <xm-loader [showLoader]="showLoader"></xm-loader>
    <div *ngIf="list?.length" class="material-datatables table-responsive">
      <table cellspacing="0" class="table table-striped table-no-bordered table-hover" id="datatables" style="width:100%"
             width="100%">
        <thead>
        <tr [(ascending)]="reverse" [(predicate)]="predicate" [callback]="transition.bind(this)" jhiSort>
          <th jhiSortBy="id"><span>{{'global.field.id'|translate}}</span> <span class="fa fa-sort"></span></th>
          <th jhiSortBy="clientId"><span>{{'clientManagement.clientId'|translate}}</span> <span
            class="fa fa-sort"></span></th>
          <th jhiSortBy="roleKey"><span>{{'clientManagement.roleKey'|translate}}</span> <span
            class="fa fa-sort"></span></th>
          <th><span>{{'clientManagement.description'|translate}}</span></th>
          <th jhiSortBy="createdBy"><span>{{'clientManagement.createdBy'|translate}}</span> <span
            class="fa fa-sort"></span></th>
          <th jhiSortBy="createdDate"><span>{{'clientManagement.createdDate'|translate}}</span> <span
            class="fa fa-sort"></span></th>
          <th jhiSortBy="lastModifiedBy"><span>{{'clientManagement.lastModifiedBy'|translate}}</span>
            <span class="fa fa-sort"></span>
          </th>
          <th jhiSortBy="lastModifiedDate"><span>{{'clientManagement.lastModifiedDate'|translate}}</span> <span
            class="fa fa-sort"></span></th>
          <th></th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let client of list; trackBy: trackIdentity">
          <td>
            {{client.id}}
          </td>
          <td>{{client.clientId}}</td>
          <td>{{client.roleKey}}</td>
          <td>{{client.description}}</td>
          <td>{{client.createdBy}}</td>
          <td>{{client.createdDate | date}}</td>
          <td>{{client.lastModifiedBy}}</td>
          <td>{{client.lastModifiedDate | date}}</td>
          <td class="text-right nowrap">
            <a (click)="onEdit(client)"
               *xmPermitted="['CLIENT.UPDATE']"
               href="javascript: void(0);">
              <i class="material-icons">edit</i>
            </a>
            <a (click)="onDelete(client)"
               *xmPermitted="['CLIENT.DELETE']"
               class="ml-1"
               href="javascript: void(0);">
              <i class="material-icons">close</i>
            </a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="list?.length" class="row align-items-center list-pagination">
      <div class="col-auto">
        <xm-per-page (onChange)="transition()" [(itemsPerPage)]="itemsPerPage"></xm-per-page>
      </div>
      <div class="col-auto">
        <jhi-item-count [itemsPerPage]="itemsPerPage" [page]="page" [total]="totalItems"></jhi-item-count>
      </div>
      <div class="col-sm"></div>
      <div class="col-auto">
        <ngb-pagination (pageChange)="loadPage($event)"
                        [(page)]="page"
                        [collectionSize]="totalItems"
                        [maxSize]="5"
                        [pageSize]="itemsPerPage"
        ></ngb-pagination>
      </div>
    </div>

    <no-data [show]="!list?.length"></no-data>
  </div>
</mat-card>

<div class="xm-fab">
  <button (click)="onAdd()"
          *xmPermitted="['CLIENT.CREATE']"
          class="btn btn-primary btn-icon btn-just-icon rounded-circle btn-lg"
          mat-button>
    <i class="material-icons">add</i>
  </button>
</div>
